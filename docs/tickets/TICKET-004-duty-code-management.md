# TICKET-004: ãƒã‚¹ã‚¿ç®¡ç†æ©Ÿèƒ½ - å‹¤å‹™è¨˜å·ç®¡ç†

## ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
ğŸ“‹ æœªç€æ‰‹

## å„ªå…ˆåº¦
â­â­â­â­ é«˜

## è¤‡é›‘åº¦
Medium

## æ¦‚è¦
28ç¨®é¡ã®å‹¤å‹™è¨˜å·ã®è¡¨ç¤ºãƒ»ç·¨é›†æ©Ÿèƒ½

## æˆæœç‰©
- [x] `/app/duty-codes/page.tsx` - å‹¤å‹™è¨˜å·ä¸€è¦§ãƒšãƒ¼ã‚¸
- [ ] `/app/duty-codes/new/page.tsx` - å‹¤å‹™è¨˜å·è¿½åŠ ãƒšãƒ¼ã‚¸ï¼ˆMVPç‰ˆã§ã¯çœç•¥ï¼‰
- [ ] `/app/duty-codes/[id]/edit/page.tsx` - å‹¤å‹™è¨˜å·ç·¨é›†ãƒšãƒ¼ã‚¸ï¼ˆMVPç‰ˆã§ã¯çœç•¥ï¼‰
- [x] `/lib/actions/duty-codes.ts` - Server Actions
- [x] `/components/duty-codes/` - é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - `DutyCodeTable.tsx` - ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«
  - `DutyCodeForm.tsx` - è¿½åŠ ãƒ»ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆMVPç‰ˆã§ã¯çœç•¥ï¼‰
  - `DutyCodeParser.tsx` - ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆMVPç‰ˆã§ã¯çœç•¥ï¼‰

## ä¾å­˜é–¢ä¿‚
- TICKET-002: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒæ§‹ç¯‰
- æ—¢å­˜: duty-code-parser.tsï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

## æ©Ÿèƒ½è¦ä»¶

### å‹¤å‹™è¨˜å·ä¸€è¦§
- ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  - T3ä¸­å¤®
  - T3åŒ—
  - T2ä¸­å¤®
  - ãƒã‚¹æ¡ˆå†…
  - æ¨ªç‰¹
- è¡¨ç¤ºé …ç›®
  - å‹¤å‹™è¨˜å·ï¼ˆä¾‹: 06G5DAï¼‰
  - é–‹å§‹æ™‚åˆ»ï¼ˆä¾‹: 06:30ï¼‰
  - çµ‚äº†æ™‚åˆ»ï¼ˆä¾‹: 11:45ï¼‰
  - å‹¤å‹™æ™‚é–“ï¼ˆä¾‹: 5æ™‚é–“15åˆ†ï¼‰
  - ä¼‘æ†©æ™‚é–“ï¼ˆä¾‹: ãªã—ï¼‰
  - æ—¥ã¾ãŸããƒ•ãƒ©ã‚°
  - ã‚«ãƒ†ã‚´ãƒª
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
  - é–‹å§‹æ™‚åˆ»é †
  - ã‚«ãƒ†ã‚´ãƒªé †
  - ã‚³ãƒ¼ãƒ‰é †

### å‹¤å‹™è¨˜å·è¿½åŠ 
- å‹¤å‹™è¨˜å·å…¥åŠ›ï¼ˆ6æ–‡å­—å›ºå®šï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‘ãƒ¼ã‚¹çµæœè¡¨ç¤º
  - é–‹å§‹æ™‚åˆ»
  - çµ‚äº†æ™‚åˆ»
  - å‹¤å‹™æ™‚é–“
  - ä¼‘æ†©æ™‚é–“
- ã‚«ãƒ†ã‚´ãƒªé¸æŠ
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  - è¨˜å·ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯
  - é‡è¤‡ãƒã‚§ãƒƒã‚¯

### å‹¤å‹™è¨˜å·ç·¨é›†
- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®ç·¨é›†
- ãƒ‘ãƒ¼ã‚¹çµæœã®å†è¨ˆç®—

### å‹¤å‹™è¨˜å·å‰Šé™¤
- ä½¿ç”¨ä¸­ã®å‹¤å‹™è¨˜å·ã¯å‰Šé™¤ä¸å¯

## å‹¤å‹™è¨˜å·ãƒ‘ãƒ¼ã‚µãƒ¼çµ±åˆ

### parseDutyCodeé–¢æ•°ã®æ´»ç”¨
```typescript
import { parseDutyCode } from '@/lib/duty-code-parser'

// ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›æ™‚ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‘ãƒ¼ã‚¹
const handleCodeChange = (code: string) => {
  try {
    const parsed = parseDutyCode(code)
    setPreview({
      startTime: parsed.startTime,
      endTime: parsed.endTime,
      duration: `${parsed.durationHours}æ™‚é–“${parsed.durationMinutes}åˆ†`,
      break: `${parsed.breakMinutes}åˆ†`,
      isOvernight: parsed.isOvernight,
    })
  } catch (error) {
    setPreview(null)
  }
}
```

## UIè¨­è¨ˆ

### ä¸€è¦§ç”»é¢
- ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼
- ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚¿ãƒ–ã¾ãŸã¯ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ï¼‰
- æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ï¼ˆã‚³ãƒ¼ãƒ‰æ¤œç´¢ï¼‰

### è¿½åŠ ãƒ»ç·¨é›†ç”»é¢
- å‹¤å‹™è¨˜å·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ6æ–‡å­—åˆ¶é™ï¼‰
- ãƒ‘ãƒ¼ã‚¹çµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢
  - é–‹å§‹æ™‚åˆ»
  - çµ‚äº†æ™‚åˆ»
  - å‹¤å‹™æ™‚é–“
  - ä¼‘æ†©æ™‚é–“
  - æ—¥ã¾ãŸããƒ•ãƒ©ã‚°
- ã‚«ãƒ†ã‚´ãƒªé¸æŠ
- ä¿å­˜ãƒœã‚¿ãƒ³

## åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥

DEFAULT_DUTY_CODES ã‹ã‚‰28ç¨®é¡ã‚’ä¸€æ‹¬æŠ•å…¥ã™ã‚‹æ©Ÿèƒ½

```typescript
import { DEFAULT_DUTY_CODES, parseDutyCode } from '@/lib/duty-code-parser'

export async function seedDutyCodes() {
  const supabase = await createClient()

  const dutyCodes = DEFAULT_DUTY_CODES.map(({ code, category }) => {
    const parsed = parseDutyCode(code)
    return {
      code: parsed.code,
      start_time: parsed.startTime,
      end_time: parsed.endTime,
      duration_hours: parsed.durationHours,
      duration_minutes: parsed.durationMinutes,
      break_minutes: parsed.breakMinutes,
      is_overnight: parsed.isOvernight,
      category,
    }
  })

  const { error } = await supabase.from('duty_codes').insert(dutyCodes)

  if (error) throw error
}
```

## ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- å‹¤å‹™è¨˜å·: å¿…é ˆã€6æ–‡å­—å›ºå®šã€è‹±æ•°å­—ã®ã¿
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: [00-23][A-L][0-9][A-L][A-Z]
- é‡è¤‡ãƒã‚§ãƒƒã‚¯

## ãƒ†ã‚¹ãƒˆé …ç›®
- [ ] å‹¤å‹™è¨˜å·ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãŒæ©Ÿèƒ½ã™ã‚‹
- [ ] å‹¤å‹™è¨˜å·ã®è¿½åŠ ãŒã§ãã‚‹
- [ ] ãƒ‘ãƒ¼ã‚¹çµæœãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ä¸æ­£ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
- [ ] å‹¤å‹™è¨˜å·ã®ç·¨é›†ãŒã§ãã‚‹
- [ ] å‹¤å‹™è¨˜å·ã®å‰Šé™¤ãŒã§ãã‚‹
- [ ] ä½¿ç”¨ä¸­ã®å‹¤å‹™è¨˜å·ã¯å‰Šé™¤ã§ããªã„
- [ ] åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥ãŒæ­£ã—ãå‹•ä½œã™ã‚‹

## ä¸¦è¡Œé–‹ç™ºå¯èƒ½
âœ… TICKET-003ï¼ˆå½¹è·ãƒ»ã‚¿ã‚°ç®¡ç†ï¼‰ã¨ä¸¦è¡Œé–‹ç™ºå¯èƒ½

## å®Œäº†æ¡ä»¶
- [ ] å‹¤å‹™è¨˜å·ã®CRUDæ©Ÿèƒ½ãŒå…¨ã¦å‹•ä½œã™ã‚‹
- [ ] ãƒ‘ãƒ¼ã‚µãƒ¼ãŒæ­£ã—ãçµ±åˆã•ã‚Œã¦ã„ã‚‹
- [ ] åˆæœŸ28ç¨®é¡ã®ãƒ‡ãƒ¼ã‚¿ãŒæŠ•å…¥ã•ã‚Œã¦ã„ã‚‹
- [ ] UI/UXãŒç›´æ„Ÿçš„

## è¦‹ç©ã‚‚ã‚Šå·¥æ•°
6-8æ™‚é–“

## é–‹å§‹äºˆå®šæ—¥
2025-11-15

## å®Œäº†äºˆå®šæ—¥
2025-11-16
