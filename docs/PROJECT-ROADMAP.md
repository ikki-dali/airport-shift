# プロジェクトロードマップ - シフト管理システム

## 📋 プロジェクト概要

**目的**: 150名規模のExcelシフト管理をWebシステムに移行
**期間**: 2-3週間（モックMVP版）
**技術**: Next.js 14 + TypeScript + Supabase + TailwindCSS

---

## 🎯 開発フェーズ

### Phase 1: 基盤構築（Week 1 前半: 11/15-11/16）

#### TICKET-001: プロジェクト基盤のセットアップ ✅
- **優先度**: ⭐⭐⭐⭐⭐
- **工数**: 完了
- **成果物**: Next.js環境、型定義、勤務記号パーサー

#### TICKET-002: Supabaseデータベーススキーマ構築 🔄
- **優先度**: ⭐⭐⭐⭐⭐
- **工数**: 4-6時間
- **成果物**: 7テーブル、RLS設定、初期データ投入

---

### Phase 2: マスタ管理機能（Week 1 後半: 11/16-11/19）

#### TICKET-003: 役職・タグ管理
- **優先度**: ⭐⭐⭐⭐
- **工数**: 4-6時間
- **並行開発**: TICKET-004と並行可能
- **成果物**: 役職・タグのCRUD機能

#### TICKET-004: 勤務記号管理
- **優先度**: ⭐⭐⭐⭐
- **工数**: 6-8時間
- **並行開発**: TICKET-003と並行可能
- **成果物**: 28種類の勤務記号管理、パーサー統合

#### TICKET-005: スタッフ管理
- **優先度**: ⭐⭐⭐⭐⭐
- **工数**: 8-10時間
- **依存**: TICKET-003（役職・タグ）
- **成果物**: スタッフCRUD、検索・フィルタ機能

#### TICKET-006: 配属箇所管理 ⚠️ 複雑
- **優先度**: ⭐⭐⭐⭐⭐
- **工数**: 12-16時間
- **依存**: TICKET-003, 004
- **成果物**: 配属箇所CRUD、要件設定（曜日/特定日パターン）

---

### Phase 3: 希望管理機能（Week 2 前半: 11/19-11/21）

#### TICKET-007: Excel希望表取り込み ⚠️ 複雑
- **優先度**: ⭐⭐⭐⭐⭐
- **工数**: 10-12時間
- **依存**: TICKET-005（スタッフマスタ）
- **ブロッカー**: 現行Excelフォーマットのサンプル必要
- **成果物**: Excel解析、データ投入、プレビュー機能

#### TICKET-008: 希望データ表示
- **優先度**: ⭐⭐⭐⭐
- **工数**: 6-8時間
- **依存**: TICKET-007
- **成果物**: カレンダー/テーブル表示、フィルタリング

---

### Phase 4: シフト作成機能（Week 2 中盤〜後半: 11/21-11/25）

#### TICKET-009: シフト作成画面 - 基本UI ⚠️ 複雑
- **優先度**: ⭐⭐⭐⭐⭐
- **工数**: 10-14時間
- **依存**: TICKET-005, 006
- **成果物**: カレンダーUI、スタッフ一覧、配属箇所グリッド

#### TICKET-010: ドラッグ&ドロップ実装 ⚠️ 複雑
- **優先度**: ⭐⭐⭐⭐⭐
- **工数**: 10-12時間
- **依存**: TICKET-009
- **成果物**: D&D機能、データ保存、リアルタイム更新

#### TICKET-011: 制約チェック - リアルタイムバリデーション ⚠️ 複雑
- **優先度**: ⭐⭐⭐⭐⭐
- **工数**: 8-10時間
- **依存**: TICKET-010
- **成果物**: 必要人数/責任者/タグチェック、警告表示

#### TICKET-012: バリデーションロジック強化
- **優先度**: ⭐⭐⭐
- **工数**: 6-8時間
- **並行開発**: TICKET-013と並行可能
- **成果物**: ユニットテスト、パフォーマンス最適化

---

### Phase 5: 出力・仕上げ（Week 3: 11/25-11/28）

#### TICKET-013: Excel/CSV出力
- **優先度**: ⭐⭐⭐⭐
- **工数**: 8-10時間
- **並行開発**: TICKET-012と並行可能
- **ブロッカー**: 現行出力フォーマットのサンプル必要
- **成果物**: Excel/CSV生成、ダウンロード機能

#### TICKET-014: 履歴管理
- **優先度**: ⭐⭐⭐
- **工数**: 3-4時間（基本機能のみ）
- **依存**: TICKET-010
- **成果物**: created_by/updated_by自動設定、トリガー

#### TICKET-015: シフト一覧・確定機能
- **優先度**: ⭐⭐⭐⭐
- **工数**: 8-10時間
- **依存**: TICKET-010, 011
- **成果物**: シフト一覧、確定処理、制約チェック連携

#### TICKET-016: 認証機能（オプション）
- **優先度**: ⭐⭐⭐（オプション）
- **工数**: 4-6時間
- **依存**: TICKET-002
- **成果物**: Supabase Auth、ログイン/ログアウト、RLS

#### TICKET-017: 初期データ投入・テスト
- **優先度**: ⭐⭐⭐⭐
- **工数**: 6-8時間
- **依存**: 全ての機能実装完了後
- **成果物**: シードデータ、テストシナリオ、動作確認

#### TICKET-018: デプロイ・環境設定
- **優先度**: ⭐⭐⭐⭐
- **工数**: 2-3時間
- **依存**: TICKET-017
- **成果物**: Vercelデプロイ、環境変数設定、ドキュメント

---

## 📅 推奨スケジュール

### Week 1（11/15-11/17）
```
11/15 (金)
- ✅ TICKET-001: プロジェクト基盤セットアップ
- 🔄 TICKET-002: データベーススキーマ構築（開始）

11/16 (土)
- 🔄 TICKET-002: データベーススキーマ構築（完了）
- TICKET-003: 役職・タグ管理（開始）
- TICKET-004: 勤務記号管理（開始）※並行

11/17 (日)
- TICKET-003: 役職・タグ管理（完了）
- TICKET-004: 勤務記号管理（完了）
- TICKET-005: スタッフ管理（開始）
```

### Week 2（11/18-11/24）
```
11/18-11/19 (月-火)
- TICKET-005: スタッフ管理（完了）
- TICKET-006: 配属箇所管理（開始）

11/19-11/20 (火-水)
- TICKET-006: 配属箇所管理（完了）
- TICKET-007: Excel取り込み（開始）

11/20-11/21 (水-木)
- TICKET-007: Excel取り込み（完了）
- TICKET-008: 希望データ表示（完了）

11/21-11/23 (木-土)
- TICKET-009: シフト作成UI（完了）
- TICKET-010: D&D実装（開始）

11/23-11/24 (土-日)
- TICKET-010: D&D実装（完了）
- TICKET-011: 制約チェック（開始）
```

### Week 3（11/25-11/28）
```
11/25 (月)
- TICKET-011: 制約チェック（完了）
- TICKET-012: バリデーション強化（開始）
- TICKET-013: Excel/CSV出力（開始）※並行

11/26 (火)
- TICKET-012: バリデーション強化（完了）
- TICKET-013: Excel/CSV出力（完了）
- TICKET-014: 履歴管理（完了）
- TICKET-015: シフト確定（開始）

11/27 (水)
- TICKET-015: シフト確定（完了）
- TICKET-016: 認証（オプション）
- TICKET-017: テスト（開始）

11/28 (木)
- TICKET-017: テスト（完了）
- TICKET-018: デプロイ（完了）
- 🎉 MVP版リリース
```

---

## ⚠️ ブロッカー・リスク

### 高優先度ブロッカー
1. **Excelフォーマット仕様不明** (TICKET-007)
   - 現行の希望表フォーマットのサンプルが必要
   - **対応**: サンプルファイル提供を依頼

2. **Excel出力フォーマット不明** (TICKET-013)
   - 現行の出力フォーマットのサンプルが必要
   - **対応**: サンプルファイル提供を依頼

### 技術的リスク
1. **D&DライブラリのReact 19互換性** (TICKET-010)
   - @dnd-kit推奨、事前確認必要
   - **対応**: 早期にライブラリ検証

2. **150名のパフォーマンス** (TICKET-009, 010)
   - 大量データでの動作確認必要
   - **対応**: 仮想化（react-window）検討

### 業務的リスク
1. **配属箇所要件の複雑性** (TICKET-006)
   - 曜日パターン・特定日パターンの仕様確認
   - **対応**: 要件のヒアリング

---

## 🎯 Quick Wins（早期価値提供）

### 優先順位順
1. **TICKET-002**: データベース構築 → 全ての基盤
2. **TICKET-003, 004**: 役職・タグ・勤務記号管理 → 独立して完成可能
3. **TICKET-005**: スタッフ管理 → シンプルで早期完成可能

---

## 🔄 並行開発の機会

### 同時進行可能なチケット
- **TICKET-003 & 004**: 役職・タグ管理 + 勤務記号管理
- **TICKET-012 & 013**: バリデーション強化 + Excel/CSV出力

---

## ✅ MVP版の完了条件

### 必須機能
- [x] プロジェクト基盤セットアップ
- [ ] データベース構築
- [ ] マスタ管理（スタッフ、配属箇所、勤務記号）
- [ ] Excel希望表取り込み
- [ ] シフト作成（D&D）
- [ ] 制約チェック（必要人数、責任者、タグ）
- [ ] Excel/CSV出力
- [ ] シフト確定機能
- [ ] デプロイ

### オプション機能（時間があれば）
- [ ] 認証機能
- [ ] 変更履歴テーブル
- [ ] 詳細な統計・レポート

---

## 📊 工数サマリー

| フェーズ | チケット数 | 最小工数 | 最大工数 |
|---------|-----------|---------|---------|
| Phase 1: 基盤構築 | 2 | 4h | 6h |
| Phase 2: マスタ管理 | 4 | 30h | 40h |
| Phase 3: 希望管理 | 2 | 16h | 20h |
| Phase 4: シフト作成 | 4 | 34h | 44h |
| Phase 5: 出力・仕上げ | 6 | 31h | 41h |
| **合計** | **18** | **115h** | **151h** |

**実質作業時間**: 約2-3週間（1日8時間として14-19日）

---

## 📝 次のステップ

1. **TICKET-002を完了させる** - データベーススキーマ構築
2. Excelフォーマットのサンプルファイルを入手
3. Phase 2のマスタ管理機能に着手
4. 並行開発を活用してスピードアップ

---

**最終更新**: 2025-11-15
**ステータス**: Phase 1進行中（TICKET-002）
